<!DOCTYPE html>
<script src="js/leon.js"></script>
<script src="js/TweenMax.min.js"></script>
<body>
    <table>
        <tr>
            <td><canvas id="text_area"></canvas></td>
            <td><canvas id="img_area"></canvas></td>
        </tr>
</body>
<script>
let leon, canvas, canvas1, ctx, ctx1;

const sw = 800;
const sh = 600;
const pixelRatio = 2;

function showText(wording) {


    canvas = document.getElementById("text_area");
    ctx = canvas.getContext("2d");

    canvas.width = sw * pixelRatio;
    canvas.height = sh * pixelRatio;
    canvas.style.width = sw + 'px';
    canvas.style.height = sh + 'px';
    ctx.scale(pixelRatio, pixelRatio);

    leon = new LeonSans({
        text: wording,
        color: ['#000000'],
        size: 80,
        weight: 200
    });

    let i, total = leon.drawing.length;
    for (i = 0; i < total; i++) {
        TweenMax.fromTo(leon.drawing[i], 1.6, {
            value: 0
        }, {
            delay: i * 0.05,
            value: 1,
            ease: Power4.easeOut
        });
    }
    requestAnimationFrame(animate);
}

function animate(t) {
    requestAnimationFrame(animate);
    ctx.clearRect(0, 0, sw, sh);
    const x = (sw - leon.rect.w) / 2;
    const y = (sh - leon.rect.h) / 2;
    leon.position(x, y);
    leon.draw(ctx);
}

window.onload = () => {
    const wording = 'The quick white\nhorse jumps over\nthe lazy dog';
    showText(wording);
    showImg('img/over.jpg');
};

function showImg(img_src) {
    canvas1 = document.getElementById('img_area');
    ctx1 = canvas1.getContext("2d"); 

    // leon.text = "changed";
    const img = new Image();
    img.src = img_src;
    img.onload = () =>{
        canvas1.width = img.width;
        canvas1.height = img.height;
        ctx1.drawImage(img, 0, 0,img.width, img.height);
    } 
}

window.onclick = ()=>{
    const wording = 'Finally, \nthey fall in love ~';
    showText(wording);
    showImg('img/black.jpg');
    setTimeout(function(){  showImg('img/color.jpg');;}, 3000); 
}

</script>
</html>